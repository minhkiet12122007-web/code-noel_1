const canvas=document.querySelector(".webgl"),renderer=new THREE.WebGLRenderer({canvas,antialias:!0});renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);const scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,100);camera.position.set(5,3,6);const controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enableDamping=!0;const light=new THREE.DirectionalLight(16777215,1);light.position.set(5,10,5),scene.add(light),scene.add(new THREE.AmbientLight(16777215,.7));const gltf=new THREE.GLTFLoader,mtl=new THREE.MTLLoader,obj=new THREE.OBJLoader;gltf.load("/code-noel/assets/models/snowman/scene.gltf",(e=>{e.scene.scale.set(1,1,1),e.scene.position.set(0,0,0),scene.add(e.scene),console.log("Snowman loaded")})),mtl.load("/code-noel/assets/models/House/materials.mtl",(e=>{e.preload(),obj.setMaterials(e),obj.load("/code-noel/assets/models/House/model.obj",(e=>{e.scale.set(1.5,1.5,1.5),e.position.set(3,0,-2),scene.add(e),console.log("House loaded")}))})),mtl.load("/code-noel/assets/models/christmas_tree/materials.mtl",(e=>{e.preload(),obj.setMaterials(e),obj.load("/code-noel/assets/models/christmas_tree/model.obj",(e=>{e.scale.set(1.2,1.2,1.2),e.position.set(-3,0,-2),scene.add(e),console.log("Christmas Tree loaded")}))}));const snowTexture=(new THREE.TextureLoader).load("/code-noel/assets/models/snowman/snowflake.png"),snowGeo=new THREE.BufferGeometry,count=3e3,pos=new Float32Array(9e3);for(let e=0;e<9e3;e++)pos[e]=20*(Math.random()-.5);snowGeo.setAttribute("position",new THREE.BufferAttribute(pos,3));const snow=new THREE.Points(snowGeo,new THREE.PointsMaterial({size:.12,map:snowTexture,transparent:!0,depthWrite:!1}));function animate(){controls.update(),renderer.render(scene,camera),snow.rotation.y+=5e-4,requestAnimationFrame(animate)}scene.add(snow),animate(),window.addEventListener("resize",(()=>{camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),renderer.setSize(window.innerWidth,window.innerHeight)}));const bgm=document.getElementById("bgm"),musicToggle=document.getElementById("musicToggle");let musicOn=!1;musicToggle.addEventListener("click",(()=>{musicOn?(bgm.pause(),musicOn=!1,musicToggle.innerText="ðŸ”‡ Music: OFF"):bgm.play().then((()=>{musicOn=!0,musicToggle.innerText="ðŸ”Š Music: ON"})).catch((e=>{console.log("KhÃ´ng phÃ¡t Ä‘Æ°á»£c nháº¡c:",e)}))}));